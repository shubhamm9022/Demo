<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Details</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="logo-container">
            <a href="index.html"><img src="logo.png" alt="MoviesVault.HQ Logo" class="logo"></a>
        </div>
    </header>
    
    <section id="movie-details">
        <div class="movie-container">
            <img id="movie-poster" src="" alt="Movie Poster" class="movie-poster">
            <div class="movie-info">
                <h1 id="movie-title">Movie Title</h1>
                <p id="movie-description">Movie description goes here...</p>
                <p><strong>Year:</strong> <span id="movie-year"></span></p>
                <div class="buttons">
                    <div class="btn-container">
    <a id="stream-link" class="btn" href="#" target="_blank">üé¨ Stream</a>
    <a id="download-link" class="btn" href="#" target="_blank">‚¨áÔ∏è Download</a>
                </div>
            </div>
        </div>
    </section>
    
    <footer>
        <p>&copy; 2025 Movie Vault. All Rights Reserved.</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            function getMovieIdFromURL() {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get("id")?.trim();
            }

            async function fetchMovieDetails() {
                const movieId = getMovieIdFromURL();
                if (!movieId) {
                    document.getElementById("movie-details").innerHTML = "<p>Movie ID not found!</p>";
                    return;
                }

                try {
                    const response = await fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vR0D7_9n5fJGj30Erv8CEr3rz7UGPh3qdvSx79RiVCf2iuT_yZw51mr-9cdGxpyXbSPTbYXcuHC8cPk/pub?output=csv");
                    const data = await response.text();
                    const rows = data.split("\n").slice(1);

                    const movies = rows.map(row => {
                        const columns = row.replace(/"/g, '').trim().split(",");
                        return {
                            title: columns[0]?.trim(),
                            year: columns[1]?.trim(),
                            poster: columns[2]?.trim(),
                            stream: columns[3]?.trim(),
                            download: columns[4]?.trim(),
                            id: columns[5]?.trim(),
                            description: columns[6]?.trim() || "No description available."
                        };
                    });

                    const movie = movies.find(m => m.id === movieId);
                    if (movie) {
                        document.getElementById("movie-title").textContent = movie.title;
                        document.getElementById("movie-poster").src = movie.poster;
                        document.getElementById("movie-year").textContent = movie.year;
                        document.getElementById("stream-link").href = movie.stream;
                        document.getElementById("download-link").href = movie.download;
                        document.getElementById("movie-description").textContent = movie.description;
                    } else {
                        document.getElementById("movie-details").innerHTML = "<p>Movie not found!</p>";
                    }
                } catch (error) {
                    console.error("Error fetching movie details:", error);
                }
            }

            fetchMovieDetails();
        });
    </script>
</body>
</html>

